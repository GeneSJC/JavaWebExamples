<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>

<script type="text/javascript" src='../js/ajax_util.js'  ></script>

<script type="text/javascript">

	var pageRefreshMilliseconds = 2 * 1000; // 2 seconds
	
	setInterval(loadJavaTime, (pageRefreshMilliseconds));

	function loadJavaTime()
	{
		var baseurl = "http://localhost:8080/JavaWebExamples/JavaDate";
		
		doAjaxRequest(baseurl, showResult);
	}
	
	function showResult() 
	{
		var response = getAjaxResponse();
		
		// alert ('showResult gets response = ' + response);
		
		if (response == null)
			return;
		
		processJavaDateXml(response);
	}
	
	function processJavaDateXml(response)
	{
		// alert ('enter processJavaDateXml');
		
			// get data from xml
		var javaDateArr = response.getElementsByTagName("JavaDate");
		var javaDateXml = javaDateArr[0];
		

			// get xml, corresponding page element, and update
		var longXmlBlock = javaDateXml.getElementsByTagName("long")[0];
		var timeLongSpanTag = document.getElementById("time_long_span");
		timeLongSpanTag.innerHTML = longXmlBlock.textContent;
		
			// get xml, corresponding page element, and update
		var textXmlBlock = javaDateXml.getElementsByTagName("text")[0];
		var timeTextSpanTag = document.getElementById("time_text_span");
		timeTextSpanTag.innerHTML = textXmlBlock.textContent;
	}
</script>
</head>
<body >

	<script type="text/javascript">
	
	var note1 = 'Page will Ajax-refresh every ' + pageRefreshMilliseconds/1000 + ' seconds ';
	document.write(note1);
	</script>


	<br/>
	<br/>
	<input style='font-size: 1em'  type="button" value="Manual Update" onclick="loadJavaTime();" />
	
	<h2>Current Time</h2>
	time as long: <span id="time_long_span"></span>
	<br/>
	time as text: <span id="time_text_span"></span>
	
	
</body>
</html>
